<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CafeSound - Premium Coffee Music Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1db954;
            --primary-dark: #1aa34a;
            --bg-dark: #121212;
            --bg-darker: #000000;
            --bg-card: #181818;
            --bg-hover: #282828;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --coffee-accent: #d4a574;
            --coffee-dark: #8b4513;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .poppins { font-family: 'Poppins', sans-serif; }
        
        /* Layout */
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        .sidebar {
            width: 280px;
            background: var(--bg-darker);
            padding: 24px;
            overflow-y: auto;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            z-index: 100;
        }
        
        .main-content {
            flex: 1;
            background: linear-gradient(180deg, var(--bg-card) 0%, var(--bg-dark) 300px);
            overflow-y: auto;
            padding-bottom: 100px;
        }
        
        /* Mobile Layout */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                transform: translateX(-100%);
                z-index: 1000;
                width: 320px;
                padding: 32px 24px;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                width: 100%;
                padding: 0 16px 120px;
            }
        }
        
        /* Cards */
        .music-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid transparent;
        }
        
        .music-card:hover {
            background: var(--bg-hover);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
            border-color: rgba(29, 185, 84, 0.3);
        }
        
        .music-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(29, 185, 84, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .music-card:hover::before {
            opacity: 1;
        }
        
        /* Album Art */
        .album-art {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }
        
        .album-art::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
        }
        
        /* Play Button */
        .play-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-size: 18px;
            opacity: 0;
            transform: translateY(8px);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            border: none;
            cursor: pointer;
        }
        
        .music-card:hover .play-button {
            opacity: 1;
            transform: translateY(0);
        }
        
        .play-button:hover {
            transform: scale(1.05);
            background: var(--primary-dark);
        }
        
        .play-button.playing {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Navigation */
        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            border-radius: 8px;
            margin: 4px 0;
            cursor: pointer;
            font-size: 16px;
        }
        
        .nav-item:hover,
        .nav-item.active {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-item i {
            width: 28px;
            margin-right: 16px;
            font-size: 20px;
        }
        
        /* Music Player */
        .music-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 90px;
            background: var(--bg-card);
            border-top: 1px solid #282828;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            align-items: center;
            padding: 0 24px;
            z-index: 200;
            gap: 24px;
        }
        
        @media (max-width: 768px) {
            .music-player {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
                height: auto;
                padding: 16px;
                gap: 16px;
            }
            
            .player-info {
                order: 1;
            }
            
            .player-controls {
                order: 2;
            }
            
            .player-volume {
                display: none;
            }
        }
        
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #4f4f4f;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            transition: height 0.2s ease;
        }
        
        .progress-bar:hover {
            height: 6px;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 2px;
            width: 0%;
            position: relative;
            transition: width 0.1s ease;
        }
        
        .progress-handle {
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
            cursor: pointer;
        }
        
        .progress-bar:hover .progress-handle {
            opacity: 1;
        }
        
        /* Control Buttons */
        .control-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 48px;
            min-height: 48px;
        }
        
        .control-button:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .control-button.active {
            color: var(--primary);
        }
        
        .main-play-button {
            width: 56px;
            height: 56px;
            background: white;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
        }
        
        .main-play-button:hover {
            transform: scale(1.05);
        }
        
        /* Heart Button */
        .heart-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
            padding: 12px;
            border-radius: 50%;
            min-width: 48px;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .heart-button:hover {
            color: var(--text-primary);
            transform: scale(1.1);
        }
        
        .heart-button.liked {
            color: var(--primary);
        }
        
        /* Genre Pills */
        .genre-pill {
            background: var(--bg-hover);
            color: var(--text-primary);
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            border: 2px solid transparent;
            min-height: 48px;
            display: flex;
            align-items: center;
        }
        
        .genre-pill:hover {
            background: #3a3a3a;
            transform: translateY(-2px);
        }
        
        .genre-pill.active {
            background: var(--primary);
            color: black;
            border-color: var(--primary);
        }
        
        /* Track List */
        .track-item {
            display: grid;
            grid-template-columns: 48px 1fr auto auto;
            gap: 16px;
            padding: 12px 16px;
            border-radius: 8px;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            min-height: 64px;
        }
        
        .track-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .track-item.playing {
            background: rgba(29, 185, 84, 0.1);
        }
        
        @media (max-width: 768px) {
            .track-item {
                grid-template-columns: 1fr;
                gap: 12px;
                padding: 20px;
                border-radius: 16px;
                background: var(--bg-card);
                margin-bottom: 12px;
                border: 1px solid #333;
            }
            
            .track-item:hover {
                background: var(--bg-hover);
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            }
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 100%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .modal input,
        .modal textarea {
            width: 100%;
            background: var(--bg-hover);
            border: 2px solid #404040;
            border-radius: 8px;
            padding: 16px;
            color: white;
            margin: 12px 0;
            font-size: 16px;
            transition: border-color 0.2s ease;
        }
        
        .modal input:focus,
        .modal textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .modal button {
            background: var(--primary);
            color: black;
            border: none;
            border-radius: 24px;
            padding: 16px 32px;
            font-weight: 600;
            cursor: pointer;
            margin: 8px 4px;
            transition: all 0.2s ease;
            font-size: 16px;
            min-height: 48px;
        }
        
        .modal button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        .modal button.secondary {
            background: transparent;
            color: white;
            border: 2px solid #404040;
        }
        
        .modal button.secondary:hover {
            background: #404040;
        }
        
        /* Grids */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }
        
        @media (max-width: 768px) {
            .music-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 16px;
                margin-bottom: 32px;
            }
        }
        
        /* Header */
        .header-gradient {
            background: linear-gradient(135deg, var(--coffee-accent) 0%, var(--coffee-dark) 100%);
            padding: 64px 32px 32px;
            margin: -24px -32px 32px;
            border-radius: 0 0 24px 24px;
        }
        
        @media (max-width: 768px) {
            .header-gradient {
                padding: 48px 16px 24px;
                margin: -16px -16px 24px;
                border-radius: 0 0 16px 16px;
            }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: black;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        @media (max-width: 768px) {
            .notification {
                top: 80px;
                right: 16px;
                left: 16px;
                text-align: center;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4f4f4f;
            border-radius: 6px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #6f6f6f;
        }
        
        /* Animations */
        .coffee-steam {
            position: absolute;
            width: 3px;
            height: 40px;
            background: linear-gradient(to top, transparent, rgba(255,255,255,0.6), transparent);
            border-radius: 50%;
            animation: steam 3s ease-in-out infinite;
            filter: blur(1px);
        }
        
        @keyframes steam {
            0%, 100% { 
                opacity: 0; 
                transform: translateY(0) translateX(0) rotate(0deg); 
            }
            25% { 
                opacity: 0.7; 
                transform: translateY(-10px) translateX(2px) rotate(5deg); 
            }
            50% { 
                opacity: 1; 
                transform: translateY(-20px) translateX(-1px) rotate(-3deg); 
            }
            75% { 
                opacity: 0.8; 
                transform: translateY(-30px) translateX(3px) rotate(7deg); 
            }
        }
        
        .coffee-bean {
            position: absolute;
            width: 8px;
            height: 10px;
            background: var(--coffee-dark);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: float 8s ease-in-out infinite;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .coffee-bean::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            height: 6px;
            background: #654321;
            border-radius: 1px;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg); 
                opacity: 0.6; 
            }
            25% { 
                transform: translateY(-15px) rotate(90deg); 
                opacity: 0.8; 
            }
            50% { 
                transform: translateY(-30px) rotate(180deg); 
                opacity: 1; 
            }
            75% { 
                transform: translateY(-20px) rotate(270deg); 
                opacity: 0.9; 
            }
        }
        
        /* Loading */
        .loading {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Utility Classes */
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        /* Touch Optimizations */
        @media (max-width: 768px) {
            .control-button,
            .heart-button,
            .nav-item {
                min-width: 48px;
                min-height: 48px;
                padding: 12px;
            }
            
            .play-button {
                width: 64px;
                height: 64px;
                font-size: 20px;
            }
            
            .main-play-button {
                width: 64px;
                height: 64px;
                font-size: 20px;
            }
        }
        
        /* Safe Areas */
        @supports (padding: max(0px)) {
            .music-player {
                padding-bottom: max(16px, env(safe-area-inset-bottom));
            }
            
            .sidebar {
                padding-top: max(32px, env(safe-area-inset-top));
                padding-bottom: max(32px, env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText">Track added to queue</span>
    </div>

    <!-- Mobile Overlay -->
    <div id="overlay" class="overlay"></div>

    <!-- Create Playlist Modal -->
    <div id="createPlaylistModal" class="modal">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-6 poppins">Create Playlist</h2>
            <input type="text" id="playlistNameInput" placeholder="Playlist name" maxlength="50">
            <textarea id="playlistDescInput" placeholder="Description (optional)" rows="3"></textarea>
            <div class="flex justify-end mt-6">
                <button class="secondary" onclick="closeCreatePlaylistModal()">Cancel</button>
                <button onclick="createPlaylist()">Create</button>
            </div>
        </div>
    </div>

    <!-- Add to Playlist Modal -->
    <div id="addToPlaylistModal" class="modal">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-6 poppins">Add to Playlist</h2>
            <p class="text-gray-300 mb-6" id="addToPlaylistTrackInfo">Select a playlist to add this song to:</p>
            
            <div class="max-h-60 overflow-y-auto mb-6" id="playlistSelectionList">
                <div class="text-center py-8 text-gray-400">
                    <i class="fas fa-music text-3xl mb-4"></i>
                    <p class="text-lg">No playlists yet</p>
                    <p class="text-sm">Create a playlist first</p>
                </div>
            </div>
            
            <div class="border-t border-gray-600 pt-6">
                <button class="w-full bg-transparent border-2 border-gray-600 text-white py-3 px-6 rounded-xl hover:bg-gray-600 transition-colors mb-4 font-semibold" onclick="createNewPlaylistFromModal()">
                    <i class="fas fa-plus mr-2"></i>Create New Playlist
                </button>
            </div>
            
            <div class="flex justify-end mt-6">
                <button class="secondary" onclick="closeAddToPlaylistModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Logo -->
            <div class="mb-8">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-600 rounded-lg mr-3 flex items-center justify-center">
                        <i class="fas fa-coffee text-white text-lg"></i>
                    </div>
                    <span class="text-2xl font-bold poppins">CafeSound</span>
                </div>
            </div>
            
            <!-- Main Navigation -->
            <nav class="mb-8">
                <a href="#" class="nav-item active" data-section="home">
                    <i class="fas fa-home"></i>
                    Home
                </a>
                <a href="#" class="nav-item" data-section="library">
                    <i class="fas fa-list"></i>
                    Your Library
                </a>
            </nav>
            
            <!-- Create Playlist -->
            <div class="mb-8">
                <a href="#" class="nav-item" id="createPlaylistBtn">
                    <i class="fas fa-plus-square"></i>
                    Create Playlist
                </a>
                <a href="#" class="nav-item" id="likedSongsBtn" data-section="liked">
                    <i class="fas fa-heart"></i>
                    Liked Songs
                </a>
            </div>
            
            <!-- Coffee Playlists -->
            <div class="border-t border-gray-700 pt-6">
                <div class="text-xs text-gray-400 uppercase tracking-wider mb-4 font-semibold px-3">Coffee Moods</div>
                <a href="#" class="nav-item playlist-nav" data-playlist="morning">
                    <i class="fas fa-sun"></i>
                    Morning Brew
                </a>
                <a href="#" class="nav-item playlist-nav" data-playlist="afternoon">
                    <i class="fas fa-coffee"></i>
                    Afternoon Espresso
                </a>
                <a href="#" class="nav-item playlist-nav" data-playlist="evening">
                    <i class="fas fa-moon"></i>
                    Evening Decaf
                </a>
                <a href="#" class="nav-item playlist-nav" data-playlist="study">
                    <i class="fas fa-graduation-cap"></i>
                    Study Sessions
                </a>
                <a href="#" class="nav-item playlist-nav" data-playlist="weekend">
                    <i class="fas fa-calendar-week"></i>
                    Weekend Vibes
                </a>
            </div>
            
            <!-- User Playlists -->
            <div class="border-t border-gray-700 pt-6 mt-6" id="userPlaylistsSection">
                <div class="text-xs text-gray-400 uppercase tracking-wider mb-4 font-semibold px-3">Your Playlists</div>
                <div id="userPlaylistsList"></div>
            </div>
            
            <!-- Floating Coffee Beans -->
            <div class="coffee-bean" style="top: 60%; left: 20%; animation-delay: 0s;"></div>
            <div class="coffee-bean" style="top: 40%; right: 15%; animation-delay: 2s;"></div>
            <div class="coffee-bean" style="top: 80%; left: 60%; animation-delay: 4s;"></div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Home Section -->
            <div id="homeSection" class="section active">
                <!-- Header -->
                <div class="header-gradient">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center space-x-4">
                            <button class="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center control-button" id="backBtn">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center control-button" id="forwardBtn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <h1 class="text-5xl font-bold mb-4 poppins" id="mainTitle">Good afternoon</h1>
                    <p class="text-xl opacity-90" id="mainSubtitle">Perfect coffee music for your day</p>
                </div>
                
                <div class="px-8">
                    <!-- Featured Video -->
                    <section class="mb-12">
                        <h2 class="text-3xl font-bold mb-6 poppins">Featured Music Video</h2>
                        <div class="relative">
                            <div id="videoSlideshow" class="bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-8 transition-all duration-500">
                                <div class="flex flex-col md:flex-row items-center justify-between mb-6">
                                    <div class="flex items-center space-x-6 mb-4 md:mb-0">
                                        <div class="w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl flex items-center justify-center text-3xl">
                                            <i class="fas fa-play text-white" id="videoIcon"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-2xl font-bold mb-2" id="videoTitle">Coffee Shop Jazz Vibes</h3>
                                            <p class="text-gray-200 text-lg" id="videoDescription">Relaxing jazz music for your perfect coffee moment</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <button class="w-12 h-12 bg-black bg-opacity-30 hover:bg-opacity-50 rounded-full flex items-center justify-center text-white transition-all" id="prevVideoBtn">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <button class="w-12 h-12 bg-black bg-opacity-30 hover:bg-opacity-50 rounded-full flex items-center justify-center text-white transition-all" id="nextVideoBtn">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="rounded-2xl overflow-hidden mb-6">
                                    <iframe width="100%" height="400" id="videoFrame" src="https://www.youtube.com/embed/KcEbfZvjLt4" frameborder="0" allowfullscreen class="w-full"></iframe>
                                </div>
                                <div class="flex items-center justify-center space-x-3">
                                    <div class="flex space-x-2" id="videoPagination">
                                        <div class="w-3 h-3 bg-white rounded-full opacity-100"></div>
                                        <div class="w-3 h-3 bg-white rounded-full opacity-50"></div>
                                        <div class="w-3 h-3 bg-white rounded-full opacity-50"></div>
                                        <div class="w-3 h-3 bg-white rounded-full opacity-50"></div>
                                    </div>
                                    <span class="text-white font-semibold ml-4" id="videoCounter">1 / 4</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Genre Pills -->
                    <div class="flex flex-wrap gap-3 mb-8 overflow-x-auto pb-2">
                        <div class="genre-pill active" data-genre="all">All</div>
                        <div class="genre-pill" data-genre="jazz">Jazz</div>
                        <div class="genre-pill" data-genre="acoustic">Acoustic</div>
                        <div class="genre-pill" data-genre="lofi">Lo-fi</div>
                        <div class="genre-pill" data-genre="indie">Indie</div>
                        <div class="genre-pill" data-genre="ambient">Ambient</div>
                        <div class="genre-pill" data-genre="bossa">Bossa Nova</div>
                        <div class="genre-pill" data-genre="folk">Folk</div>
                    </div>
                    
                    <!-- Recently Played -->
                    <section class="mb-12">
                        <h2 class="text-3xl font-bold mb-6 poppins">Recently played</h2>
                        <div class="music-grid" id="recentlyPlayedGrid">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </section>
                    
                    <!-- Made for You -->
                    <section class="mb-12">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-3xl font-bold poppins">Made for you</h2>
                            <a href="#" class="text-sm text-gray-400 hover:text-white font-semibold transition-colors">Show all</a>
                        </div>
                        <div class="music-grid" id="madeForYouGrid">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </section>
                </div>
            </div>

            <!-- Liked Songs Section -->
            <div id="likedSection" class="section">
                <div class="header-gradient">
                    <div class="flex items-center justify-between mb-8">
                        <button class="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center control-button" onclick="showSection('home')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8 mb-8">
                        <div class="w-48 h-48 md:w-60 md:h-60 bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl flex items-center justify-center text-6xl text-white shadow-2xl flex-shrink-0">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="flex-1 text-center md:text-left">
                            <p class="text-sm font-semibold mb-2 opacity-80">PLAYLIST</p>
                            <h1 class="text-4xl md:text-6xl font-bold mb-4 poppins">Liked Songs</h1>
                            <p class="text-gray-300 mb-4 text-lg">Your favorite tracks all in one place</p>
                            <div class="flex items-center justify-center md:justify-start space-x-2 text-sm text-gray-300">
                                <span class="font-semibold">CafeSound</span>
                                <span>•</span>
                                <span id="likedSongsCount">0 songs</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="px-8">
                    <div class="flex items-center space-x-6 mb-8">
                        <button class="main-play-button" id="likedPlayAllBtn">
                            <i class="fas fa-play ml-1"></i>
                        </button>
                    </div>
                    
                    <div id="likedTracksList">
                        <div class="text-center py-16 text-gray-400">
                            <i class="fas fa-heart text-5xl mb-6"></i>
                            <p class="text-2xl font-semibold mb-2">No liked songs yet</p>
                            <p class="text-lg">Songs you like will appear here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coffee Playlist Section -->
            <div id="coffeePlaylistSection" class="section">
                <div id="coffeePlaylistHeader">
                    <!-- Content populated by JavaScript -->
                </div>
                
                <div class="px-8">
                    <div class="flex items-center space-x-6 mb-8">
                        <button class="main-play-button" id="coffeePlayAllBtn">
                            <i class="fas fa-play ml-1"></i>
                        </button>
                    </div>
                    
                    <div id="coffeeTracksList">
                        <!-- Content populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Music Player -->
    <div class="music-player">
        <!-- Now Playing Info -->
        <div class="player-info flex items-center space-x-4">
            <div class="w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-600 rounded-xl flex items-center justify-center text-white flex-shrink-0" id="playerAlbumArt">
                <i class="fas fa-sun text-xl"></i>
            </div>
            <div class="min-w-0 flex-1">
                <div class="font-semibold text-white truncate" id="playerTrackTitle">Morning Brew</div>
                <div class="text-sm text-gray-400 truncate" id="playerArtist">Café Sessions</div>
            </div>
            <button class="heart-button" id="playerHeartBtn">
                <i class="far fa-heart"></i>
            </button>
        </div>
        
        <!-- Player Controls -->
        <div class="player-controls">
            <div class="flex items-center justify-center space-x-4 mb-3">
                <button class="control-button" id="shuffleBtn">
                    <i class="fas fa-random"></i>
                </button>
                <button class="control-button" id="prevBtn">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="main-play-button" id="playPauseBtn">
                    <i class="fas fa-pause"></i>
                </button>
                <button class="control-button" id="nextBtn">
                    <i class="fas fa-step-forward"></i>
                </button>
                <button class="control-button" id="repeatBtn">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
            <div class="flex items-center space-x-3 text-xs text-gray-400">
                <span id="currentTime">1:23</span>
                <div class="progress-bar flex-1" id="progressBar">
                    <div class="progress-fill" id="progressFill">
                        <div class="progress-handle" id="progressHandle"></div>
                    </div>
                </div>
                <span id="totalTime">3:24</span>
            </div>
        </div>
        
        <!-- Volume Controls -->
        <div class="player-volume flex items-center justify-end space-x-3">
            <button class="control-button" id="volumeBtn">
                <i class="fas fa-volume-down"></i>
            </button>
            <div class="w-24 h-1 bg-gray-600 rounded-full cursor-pointer" id="volumeSlider">
                <div class="h-full bg-green-500 rounded-full" id="volumeFill" style="width: 70%;"></div>
            </div>
        </div>
    </div>
    
    <!-- Mobile Menu Toggle -->
    <button class="fixed top-6 left-6 z-50 md:hidden w-12 h-12 bg-black bg-opacity-70 rounded-full flex items-center justify-center text-white backdrop-blur-sm" id="mobileMenuBtn">
        <i class="fas fa-bars text-lg"></i>
    </button>
    
    <script>
        // Application State
        let currentTrack = {
            id: 'morning-brew',
            title: 'Morning Brew',
            artist: 'Café Sessions',
            album: 'Acoustic Mornings',
            duration: 204,
            currentTime: 83,
            isPlaying: false
        };
        
        let volume = 0.7;
        let isShuffled = false;
        let repeatMode = 0;
        let currentPlaylist = 'morning';
        let likedSongs = [];
        let userPlaylists = [];
        let currentSection = 'home';
        let currentAudio = null;
        let currentVideoIndex = 0;
        
        // Track Database
        const tracks = {
            'morning-brew': {
                title: 'Morning Brew',
                artist: 'Café Sessions',
                album: 'Acoustic Mornings',
                duration: 204,
                gradient: 'from-amber-400 to-orange-600',
                icon: 'fas fa-sun',
                youtube: 'https://www.youtube.com/watch?v=KcEbfZvjLt4',
                genre: 'acoustic',
                plays: 127543
            },
            'sunrise-serenade': {
                title: 'Sunrise Serenade',
                artist: 'The Coffee Collective',
                album: 'Dawn Melodies',
                duration: 252,
                gradient: 'from-green-400 to-teal-500',
                icon: 'fas fa-guitar',
                youtube: 'https://www.youtube.com/watch?v=jfKfPfyJRdk',
                genre: 'folk',
                plays: 89234
            },
            'golden-hour': {
                title: 'Golden Hour',
                artist: 'Indie Folk Ensemble',
                album: 'Morning Light',
                duration: 225,
                gradient: 'from-orange-400 to-red-500',
                icon: 'fas fa-star',
                youtube: 'https://www.youtube.com/watch?v=5qap5aO4i9A',
                genre: 'indie',
                plays: 245678
            },
            'gentle-awakening': {
                title: 'Gentle Awakening',
                artist: 'Acoustic Dreams',
                album: 'Soft Mornings',
                duration: 178,
                gradient: 'from-purple-400 to-pink-500',
                icon: 'fas fa-heart',
                youtube: 'https://www.youtube.com/watch?v=DWcJFNfaw9c',
                genre: 'ambient',
                plays: 56789
            },
            'fresh-start': {
                title: 'Fresh Start',
                artist: 'Morning Vibes',
                album: 'New Beginnings',
                duration: 273,
                gradient: 'from-teal-400 to-blue-500',
                icon: 'fas fa-leaf',
                youtube: 'https://www.youtube.com/watch?v=KcEbfZvjLt4',
                genre: 'lofi',
                plays: 198765
            },
            'jazz-evening': {
                title: 'Evening Jazz',
                artist: 'Smooth Jazz Collective',
                album: 'Night Sessions',
                duration: 298,
                gradient: 'from-indigo-500 to-purple-600',
                icon: 'fas fa-music',
                youtube: 'https://www.youtube.com/watch?v=jfKfPfyJRdk',
                genre: 'jazz',
                plays: 334521
            },
            'bossa-nova-sunset': {
                title: 'Bossa Nova Sunset',
                artist: 'Brazilian Café',
                album: 'Tropical Evenings',
                duration: 234,
                gradient: 'from-yellow-500 to-orange-600',
                icon: 'fas fa-palm-tree',
                youtube: 'https://www.youtube.com/watch?v=5qap5aO4i9A',
                genre: 'bossa',
                plays: 412890
            },
            'rainy-day-blues': {
                title: 'Rainy Day Blues',
                artist: 'Coffee House Blues',
                album: 'Stormy Weather',
                duration: 267,
                gradient: 'from-gray-500 to-blue-600',
                icon: 'fas fa-cloud-rain',
                youtube: 'https://www.youtube.com/watch?v=DWcJFNfaw9c',
                genre: 'jazz',
                plays: 76543
            }
        };
        
        // Featured Videos
        const featuredVideos = [
            {
                title: 'Coffee Shop Jazz Vibes',
                description: 'Relaxing jazz music for your perfect coffee moment',
                thumbnail: 'from-purple-600 to-pink-600',
                icon: 'fas fa-play',
                youtube: 'https://www.youtube.com/embed/KcEbfZvjLt4'
            },
            {
                title: 'Morning Acoustic Sessions',
                description: 'Gentle acoustic melodies to start your day right',
                thumbnail: 'from-orange-500 to-red-600',
                icon: 'fas fa-guitar',
                youtube: 'https://www.youtube.com/embed/jfKfPfyJRdk'
            },
            {
                title: 'Lo-fi Study Beats',
                description: 'Perfect background music for focus and productivity',
                thumbnail: 'from-blue-500 to-purple-600',
                icon: 'fas fa-headphones',
                youtube: 'https://www.youtube.com/embed/5qap5aO4i9A'
            },
            {
                title: 'Evening Chill Vibes',
                description: 'Smooth evening sounds for relaxation and unwinding',
                thumbnail: 'from-indigo-600 to-purple-700',
                icon: 'fas fa-moon',
                youtube: 'https://www.youtube.com/embed/DWcJFNfaw9c'
            }
        ];
        
        // Coffee Mood Playlists
        const coffeeMoods = {
            morning: {
                title: 'Morning Brew',
                description: 'Start your day with gentle acoustic melodies',
                gradient: 'from-amber-400 to-orange-600',
                icon: 'fas fa-sun',
                tracks: ['morning-brew', 'sunrise-serenade', 'golden-hour', 'gentle-awakening']
            },
            afternoon: {
                title: 'Afternoon Espresso',
                description: 'Energizing beats for your midday coffee break',
                gradient: 'from-red-500 to-pink-600',
                icon: 'fas fa-coffee',
                tracks: ['jazz-evening', 'bossa-nova-sunset', 'fresh-start', 'morning-brew']
            },
            evening: {
                title: 'Evening Decaf',
                description: 'Smooth jazz and mellow tunes for evening relaxation',
                gradient: 'from-purple-600 to-indigo-700',
                icon: 'fas fa-moon',
                tracks: ['jazz-evening', 'rainy-day-blues', 'gentle-awakening', 'bossa-nova-sunset']
            },
            study: {
                title: 'Study Sessions',
                description: 'Focus-enhancing ambient sounds for productivity',
                gradient: 'from-blue-600 to-teal-600',
                icon: 'fas fa-graduation-cap',
                tracks: ['gentle-awakening', 'fresh-start', 'morning-brew', 'rainy-day-blues']
            },
            weekend: {
                title: 'Weekend Vibes',
                description: 'Laid-back tunes for your leisurely weekend coffee',
                gradient: 'from-green-500 to-emerald-600',
                icon: 'fas fa-calendar-week',
                tracks: ['bossa-nova-sunset', 'golden-hour', 'fresh-start', 'sunrise-serenade']
            }
        };
        
        // Utility Functions
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function formatPlays(plays) {
            if (plays >= 1000000) {
                return (plays / 1000000).toFixed(1).replace('.0', '') + 'M';
            } else if (plays >= 1000) {
                return (plays / 1000).toFixed(0) + 'K';
            }
            return plays.toString();
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            notificationText.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function updatePlayerUI() {
            const track = tracks[currentTrack.id] || currentTrack;
            
            // Update player info
            document.getElementById('playerTrackTitle').textContent = track.title;
            document.getElementById('playerArtist').textContent = track.artist;
            document.getElementById('currentTime').textContent = formatTime(currentTrack.currentTime);
            document.getElementById('totalTime').textContent = formatTime(track.duration);
            
            // Update album art
            const playerAlbumArt = document.getElementById('playerAlbumArt');
            if (track.gradient && track.icon) {
                playerAlbumArt.className = `w-16 h-16 bg-gradient-to-br ${track.gradient} rounded-xl flex items-center justify-center text-white flex-shrink-0`;
                playerAlbumArt.innerHTML = `<i class="${track.icon} text-xl"></i>`;
            }
            
            // Update progress bar
            const progressPercent = (currentTrack.currentTime / track.duration) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            
            // Update play/pause button
            const playPauseBtn = document.getElementById('playPauseBtn');
            const playPauseIcon = playPauseBtn.querySelector('i');
            if (currentTrack.isPlaying) {
                playPauseIcon.className = 'fas fa-pause';
            } else {
                playPauseIcon.className = 'fas fa-play ml-1';
            }
            
            // Update heart button
            updateHeartButtons();
            
            // Update control buttons
            document.getElementById('shuffleBtn').classList.toggle('active', isShuffled);
            document.getElementById('repeatBtn').classList.toggle('active', repeatMode > 0);
            
            // Update play buttons
            document.querySelectorAll('.play-button').forEach(btn => {
                btn.classList.remove('playing');
                const icon = btn.querySelector('i');
                if (btn.dataset.track === currentTrack.id && currentTrack.isPlaying) {
                    btn.classList.add('playing');
                    icon.className = 'fas fa-pause';
                } else {
                    icon.className = 'fas fa-play';
                }
            });
            
            // Update track lists
            updateAllTrackLists();
        }
        
        function updateHeartButtons() {
            const isLiked = likedSongs.includes(currentTrack.id);
            
            document.querySelectorAll('.heart-button').forEach(btn => {
                const icon = btn.querySelector('i');
                if (isLiked) {
                    icon.className = 'fas fa-heart';
                    btn.classList.add('liked');
                } else {
                    icon.className = 'far fa-heart';
                    btn.classList.remove('liked');
                }
            });
        }
        
        function updateAllTrackLists() {
            document.querySelectorAll('.track-item').forEach(item => {
                item.classList.remove('playing');
                if (item.dataset.track === currentTrack.id) {
                    item.classList.add('playing');
                }
            });
        }
        
        function playTrack(trackId) {
            if (tracks[trackId]) {
                currentTrack.id = trackId;
                currentTrack.title = tracks[trackId].title;
                currentTrack.artist = tracks[trackId].artist;
                currentTrack.currentTime = 0;
                currentTrack.isPlaying = true;
                
                updatePlayerUI();
                showNotification(`Now playing: ${tracks[trackId].title}`);
                
                // Simulate audio playback
                if (currentAudio) {
                    clearInterval(currentAudio);
                }
                
                currentAudio = setInterval(() => {
                    if (currentTrack.isPlaying) {
                        currentTrack.currentTime++;
                        if (currentTrack.currentTime >= tracks[trackId].duration) {
                            if (repeatMode === 2) {
                                currentTrack.currentTime = 0;
                            } else {
                                nextTrack();
                            }
                        }
                        updatePlayerUI();
                    }
                }, 1000);
            }
        }
        
        function togglePlayPause() {
            currentTrack.isPlaying = !currentTrack.isPlaying;
            updatePlayerUI();
            showNotification(currentTrack.isPlaying ? 'Playing' : 'Paused');
        }
        
        function nextTrack() {
            const trackIds = getPlaylistTracks();
            if (trackIds.length === 0) return;
            
            const currentIndex = trackIds.indexOf(currentTrack.id);
            const nextIndex = (currentIndex + 1) % trackIds.length;
            playTrack(trackIds[nextIndex]);
        }
        
        function prevTrack() {
            const trackIds = getPlaylistTracks();
            if (trackIds.length === 0) return;
            
            const currentIndex = trackIds.indexOf(currentTrack.id);
            const prevIndex = currentIndex > 0 ? currentIndex - 1 : trackIds.length - 1;
            playTrack(trackIds[prevIndex]);
        }
        
        function getPlaylistTracks() {
            if (currentPlaylist === 'liked') {
                return likedSongs;
            } else if (coffeeMoods[currentPlaylist]) {
                return coffeeMoods[currentPlaylist].tracks;
            } else {
                const userPlaylist = userPlaylists.find(p => p.id === currentPlaylist);
                return userPlaylist ? userPlaylist.tracks : Object.keys(tracks);
            }
        }
        
        function toggleShuffle() {
            isShuffled = !isShuffled;
            updatePlayerUI();
            showNotification(isShuffled ? 'Shuffle on' : 'Shuffle off');
        }
        
        function toggleRepeat() {
            repeatMode = (repeatMode + 1) % 3;
            updatePlayerUI();
            const messages = ['Repeat off', 'Repeat all', 'Repeat one'];
            showNotification(messages[repeatMode]);
        }
        
        function toggleLike() {
            const trackId = currentTrack.id;
            if (likedSongs.includes(trackId)) {
                likedSongs = likedSongs.filter(id => id !== trackId);
                showNotification('Removed from Liked Songs');
            } else {
                likedSongs.push(trackId);
                showNotification('Added to Liked Songs');
            }
            
            updatePlayerUI();
            updateLikedSongsSection();
            saveLikedSongs();
        }
        
        function toggleTrackLike(trackId) {
            if (likedSongs.includes(trackId)) {
                likedSongs = likedSongs.filter(id => id !== trackId);
                showNotification('Removed from Liked Songs');
            } else {
                likedSongs.push(trackId);
                showNotification('Added to Liked Songs');
            }
            
            updatePlayerUI();
            updateLikedSongsSection();
            saveLikedSongs();
        }
        
        function updateLikedSongsSection() {
            const likedTracksList = document.getElementById('likedTracksList');
            const likedSongsCount = document.getElementById('likedSongsCount');
            
            likedSongsCount.textContent = `${likedSongs.length} songs`;
            
            if (likedSongs.length === 0) {
                likedTracksList.innerHTML = `
                    <div class="text-center py-16 text-gray-400">
                        <i class="fas fa-heart text-5xl mb-6"></i>
                        <p class="text-2xl font-semibold mb-2">No liked songs yet</p>
                        <p class="text-lg">Songs you like will appear here</p>
                    </div>
                `;
            } else {
                likedTracksList.innerHTML = generateTrackListHTML(likedSongs);
            }
        }
        
        function generateTrackListHTML(trackIds) {
            let html = '';
            
            trackIds.forEach((trackId, index) => {
                const track = tracks[trackId];
                const isLiked = likedSongs.includes(trackId);
                const isCurrentTrack = trackId === currentTrack.id;
                
                if (track) {
                    html += `
                        <div class="track-item ${isCurrentTrack ? 'playing' : ''}" data-track="${trackId}">
                            <!-- Desktop Layout -->
                            <div class="hidden md:contents">
                                <div class="flex items-center">
                                    <span class="text-lg font-bold ${isCurrentTrack ? 'text-green-400' : 'text-gray-400'}">${index + 1}</span>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-gradient-to-br ${track.gradient} rounded-lg flex items-center justify-center text-white">
                                        <i class="${track.icon}"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold ${isCurrentTrack ? 'text-green-400' : 'text-white'}">${track.title}</h4>
                                        <p class="text-sm text-gray-400">${track.artist}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <button class="heart-button ${isLiked ? 'liked' : ''}" onclick="event.stopPropagation(); toggleTrackLike('${trackId}')">
                                        <i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
                                    </button>
                                    <button class="control-button" onclick="event.stopPropagation(); showAddToPlaylistModal('${trackId}')">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="text-gray-400 font-medium">${formatTime(track.duration)}</div>
                            </div>
                            
                            <!-- Mobile Layout -->
                            <div class="md:hidden">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-lg font-bold ${isCurrentTrack ? 'text-green-400' : 'text-gray-400'}">${index + 1}</span>
                                        ${isCurrentTrack && currentTrack.isPlaying ? '<i class="fas fa-volume-up text-green-400 animate-pulse"></i>' : ''}
                                    </div>
                                    <button class="heart-button ${isLiked ? 'liked' : ''}" onclick="event.stopPropagation(); toggleTrackLike('${trackId}')">
                                        <i class="${isLiked ? 'fas' : 'far'} fa-heart text-xl"></i>
                                    </button>
                                </div>
                                
                                <div class="flex items-center space-x-4 mb-4">
                                    <div class="w-16 h-16 bg-gradient-to-br ${track.gradient} rounded-xl flex items-center justify-center text-white flex-shrink-0">
                                        <i class="${track.icon} text-xl"></i>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-bold text-lg ${isCurrentTrack ? 'text-green-400' : 'text-white'} truncate">${track.title}</h4>
                                        <p class="text-gray-400 truncate">${track.artist}</p>
                                        <p class="text-sm text-gray-500">${track.album}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm text-gray-400">${formatTime(track.duration)}</span>
                                        <span class="text-sm text-gray-500">${formatPlays(track.plays)} plays</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button class="control-button" onclick="event.stopPropagation(); showAddToPlaylistModal('${trackId}')">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="control-button" onclick="event.stopPropagation(); window.open('${track.youtube}', '_blank')">
                                            <i class="fab fa-youtube"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            return html;
        }
        
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.classList.add('active');
                currentSection = sectionName;
            }
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeNavItem = document.querySelector(`[data-section="${sectionName}"]`);
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }
            
            // Close mobile menu
            closeMobileMenu();
        }
        
        function showCoffeeMoodPlaylist(moodId) {
            const mood = coffeeMoods[moodId];
            if (!mood) return;
            
            showSection('coffeePlaylist');
            currentPlaylist = moodId;
            
            const header = document.getElementById('coffeePlaylistHeader');
            header.innerHTML = `
                <div class="header-gradient">
                    <div class="flex items-center justify-between mb-8">
                        <button class="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center control-button" onclick="showSection('home')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8 mb-8">
                        <div class="w-48 h-48 md:w-60 md:h-60 bg-gradient-to-br ${mood.gradient} rounded-2xl flex items-center justify-center text-6xl text-white shadow-2xl flex-shrink-0">
                            <i class="${mood.icon}"></i>
                        </div>
                        <div class="flex-1 text-center md:text-left">
                            <p class="text-sm font-semibold mb-2 opacity-80">PLAYLIST</p>
                            <h1 class="text-4xl md:text-6xl font-bold mb-4 poppins">${mood.title}</h1>
                            <p class="text-gray-300 mb-4 text-lg">${mood.description}</p>
                            <div class="flex items-center justify-center md:justify-start space-x-2 text-sm text-gray-300">
                                <span class="font-semibold">CafeSound</span>
                                <span>•</span>
                                <span>${mood.tracks.length} songs</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            const tracksList = document.getElementById('coffeeTracksList');
            tracksList.innerHTML = generateTrackListHTML(mood.tracks);
            
            // Update play button
            const coffeePlayBtn = document.getElementById('coffeePlayAllBtn');
            coffeePlayBtn.onclick = () => {
                if (mood.tracks.length > 0) {
                    playTrack(mood.tracks[0]);
                    showNotification(`Playing ${mood.title}`);
                }
            };
        }
        
        function createPlaylist() {
            const nameInput = document.getElementById('playlistNameInput');
            const descInput = document.getElementById('playlistDescInput');
            
            const name = nameInput.value.trim();
            const description = descInput.value.trim();
            
            if (!name) {
                showNotification('Please enter a playlist name');
                return;
            }
            
            const playlist = {
                id: 'user_' + Date.now(),
                name: name,
                description: description || 'Created by you',
                tracks: [],
                createdAt: new Date().toISOString()
            };
            
            userPlaylists.push(playlist);
            updateUserPlaylists();
            saveUserPlaylists();
            closeCreatePlaylistModal();
            showNotification(`Created playlist: ${name}`);
        }
        
        function showCreatePlaylistModal() {
            const modal = document.getElementById('createPlaylistModal');
            modal.classList.add('show');
            document.getElementById('playlistNameInput').focus();
        }
        
        function closeCreatePlaylistModal() {
            const modal = document.getElementById('createPlaylistModal');
            modal.classList.remove('show');
            document.getElementById('playlistNameInput').value = '';
            document.getElementById('playlistDescInput').value = '';
        }
        
        function showAddToPlaylistModal(trackId) {
            const modal = document.getElementById('addToPlaylistModal');
            const trackInfo = document.getElementById('addToPlaylistTrackInfo');
            const track = tracks[trackId];
            
            if (track) {
                trackInfo.textContent = `Add "${track.title}" by ${track.artist} to a playlist:`;
            }
            
            updatePlaylistSelectionList(trackId);
            modal.classList.add('show');
        }
        
        function closeAddToPlaylistModal() {
            const modal = document.getElementById('addToPlaylistModal');
            modal.classList.remove('show');
        }
        
        function updatePlaylistSelectionList(trackId) {
            const list = document.getElementById('playlistSelectionList');
            
            if (userPlaylists.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <i class="fas fa-music text-3xl mb-4"></i>
                        <p class="text-lg">No playlists yet</p>
                        <p class="text-sm">Create a playlist first</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            userPlaylists.forEach(playlist => {
                const isTrackInPlaylist = playlist.tracks.includes(trackId);
                html += `
                    <div class="flex items-center p-4 rounded-lg cursor-pointer transition-colors hover:bg-gray-700 ${isTrackInPlaylist ? 'bg-green-500 bg-opacity-20 border border-green-500' : 'border border-gray-600'}" onclick="toggleTrackInPlaylist('${playlist.id}', '${trackId}')">
                        <div class="w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-music text-gray-300"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-white">${playlist.name}</h4>
                            <p class="text-sm text-gray-400">${playlist.tracks.length} songs</p>
                        </div>
                        ${isTrackInPlaylist ? '<i class="fas fa-check text-green-400 text-xl"></i>' : ''}
                    </div>
                `;
            });
            
            list.innerHTML = html;
        }
        
        function toggleTrackInPlaylist(playlistId, trackId) {
            const playlist = userPlaylists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            const trackIndex = playlist.tracks.indexOf(trackId);
            if (trackIndex > -1) {
                playlist.tracks.splice(trackIndex, 1);
                showNotification('Removed from playlist');
            } else {
                playlist.tracks.push(trackId);
                showNotification('Added to playlist');
            }
            
            saveUserPlaylists();
            updatePlaylistSelectionList(trackId);
        }
        
        function createNewPlaylistFromModal() {
            closeAddToPlaylistModal();
            showCreatePlaylistModal();
        }
        
        function updateUserPlaylists() {
            const userPlaylistsList = document.getElementById('userPlaylistsList');
            
            if (userPlaylists.length === 0) {
                userPlaylistsList.innerHTML = '';
                return;
            }
            
            let html = '';
            userPlaylists.forEach(playlist => {
                html += `
                    <a href="#" class="nav-item user-playlist-nav" data-playlist="${playlist.id}">
                        <i class="fas fa-music"></i>
                        ${playlist.name}
                    </a>
                `;
            });
            
            userPlaylistsList.innerHTML = html;
            
            // Add event listeners
            document.querySelectorAll('.user-playlist-nav').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const playlistId = item.dataset.playlist;
                    showUserPlaylist(playlistId);
                });
            });
        }
        
        function showUserPlaylist(playlistId) {
            const playlist = userPlaylists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            showSection('coffeePlaylist');
            currentPlaylist = playlistId;
            
            const header = document.getElementById('coffeePlaylistHeader');
            header.innerHTML = `
                <div class="header-gradient">
                    <div class="flex items-center justify-between mb-8">
                        <button class="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center control-button" onclick="showSection('home')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8 mb-8">
                        <div class="w-48 h-48 md:w-60 md:h-60 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center text-6xl text-white shadow-2xl flex-shrink-0">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="flex-1 text-center md:text-left">
                            <p class="text-sm font-semibold mb-2 opacity-80">PLAYLIST</p>
                            <h1 class="text-4xl md:text-6xl font-bold mb-4 poppins">${playlist.name}</h1>
                            <p class="text-gray-300 mb-4 text-lg">${playlist.description}</p>
                            <div class="flex items-center justify-center md:justify-start space-x-2 text-sm text-gray-300">
                                <span class="font-semibold">Created by you</span>
                                <span>•</span>
                                <span>${playlist.tracks.length} songs</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            const tracksList = document.getElementById('coffeeTracksList');
            if (playlist.tracks.length === 0) {
                tracksList.innerHTML = `
                    <div class="text-center py-16 text-gray-400">
                        <i class="fas fa-music text-5xl mb-6"></i>
                        <p class="text-2xl font-semibold mb-2">No songs in this playlist</p>
                        <p class="text-lg">Add some tracks to get started</p>
                    </div>
                `;
            } else {
                tracksList.innerHTML = generateTrackListHTML(playlist.tracks);
            }
            
            // Update play button
            const coffeePlayBtn = document.getElementById('coffeePlayAllBtn');
            coffeePlayBtn.onclick = () => {
                if (playlist.tracks.length > 0) {
                    playTrack(playlist.tracks[0]);
                    showNotification(`Playing ${playlist.name}`);
                }
            };
        }
        
        function filterByGenre(genre) {
            if (genre === 'all') {
                populateHomeContent();
                return;
            }
            
            const filteredTracks = Object.keys(tracks).filter(trackId => 
                tracks[trackId].genre === genre
            );
            
            updateGrids(filteredTracks);
        }
        
        function updateGrids(trackIds) {
            const recentlyPlayedGrid = document.getElementById('recentlyPlayedGrid');
            const madeForYouGrid = document.getElementById('madeForYouGrid');
            
            // Update recently played
            let html = '';
            trackIds.slice(0, 6).forEach(trackId => {
                const track = tracks[trackId];
                html += createMusicCardHTML(trackId, track);
            });
            recentlyPlayedGrid.innerHTML = html;
            
            // Update made for you
            html = '';
            trackIds.slice(6, 12).forEach(trackId => {
                const track = tracks[trackId];
                html += createMusicCardHTML(trackId, track);
            });
            madeForYouGrid.innerHTML = html;
            
            addCardEventListeners();
        }
        
        function createMusicCardHTML(trackId, track) {
            return `
                <div class="music-card" data-track="${trackId}">
                    <div class="album-art bg-gradient-to-br ${track.gradient}">
                        <i class="${track.icon}"></i>
                    </div>
                    <h3 class="font-semibold mb-2 text-white text-lg">${track.title}</h3>
                    <p class="text-sm text-gray-400 mb-4">${track.artist}</p>
                    <button class="play-button" data-track="${trackId}">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            `;
        }
        
        function populateHomeContent() {
            const allTracks = Object.keys(tracks);
            updateGrids(allTracks);
        }
        
        function addCardEventListeners() {
            // Music cards
            document.querySelectorAll('.music-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('.play-button')) {
                        const trackId = card.dataset.track;
                        if (trackId) {
                            playTrack(trackId);
                        }
                    }
                });
            });
            
            // Play buttons
            document.querySelectorAll('.play-button').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const trackId = btn.dataset.track;
                    if (trackId) {
                        if (trackId === currentTrack.id && currentTrack.isPlaying) {
                            togglePlayPause();
                        } else {
                            playTrack(trackId);
                        }
                    }
                });
            });
            
            // Track items
            document.querySelectorAll('.track-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        const trackId = item.dataset.track;
                        if (trackId) {
                            playTrack(trackId);
                        }
                    }
                });
            });
        }
        
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
        }
        
        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.remove('open');
            overlay.classList.remove('show');
        }
        
        function updateVideoSlideshow() {
            const video = featuredVideos[currentVideoIndex];
            const slideshow = document.getElementById('videoSlideshow');
            const videoTitle = document.getElementById('videoTitle');
            const videoDescription = document.getElementById('videoDescription');
            const videoIcon = document.getElementById('videoIcon');
            const videoFrame = document.getElementById('videoFrame');
            const videoCounter = document.getElementById('videoCounter');
            const videoPagination = document.getElementById('videoPagination');
            
            // Update slideshow
            slideshow.className = `bg-gradient-to-br ${video.thumbnail} rounded-2xl p-8 transition-all duration-500`;
            videoTitle.textContent = video.title;
            videoDescription.textContent = video.description;
            videoIcon.className = video.icon + ' text-white';
            videoFrame.src = video.youtube;
            videoCounter.textContent = `${currentVideoIndex + 1} / ${featuredVideos.length}`;
            
            // Update pagination
            const dots = videoPagination.children;
            for (let i = 0; i < dots.length; i++) {
                dots[i].style.opacity = i === currentVideoIndex ? '1' : '0.5';
            }
        }
        
        function prevVideo() {
            currentVideoIndex = (currentVideoIndex - 1 + featuredVideos.length) % featuredVideos.length;
            updateVideoSlideshow();
        }
        
        function nextVideo() {
            currentVideoIndex = (currentVideoIndex + 1) % featuredVideos.length;
            updateVideoSlideshow();
        }
        
        // Storage Functions
        function saveLikedSongs() {
            localStorage.setItem('cafesound_liked_songs', JSON.stringify(likedSongs));
        }
        
        function loadLikedSongs() {
            const saved = localStorage.getItem('cafesound_liked_songs');
            if (saved) {
                likedSongs = JSON.parse(saved);
            }
        }
        
        function saveUserPlaylists() {
            localStorage.setItem('cafesound_user_playlists', JSON.stringify(userPlaylists));
        }
        
        function loadUserPlaylists() {
            const saved = localStorage.getItem('cafesound_user_playlists');
            if (saved) {
                userPlaylists = JSON.parse(saved);
            }
        }
        
        // Initialize App
        function initializeApp() {
            // Load saved data
            loadLikedSongs();
            loadUserPlaylists();
            
            // Populate content
            populateHomeContent();
            updateLikedSongsSection();
            updateUserPlaylists();
            updateVideoSlideshow();
            
            // Update UI
            updatePlayerUI();
            
            // Set greeting
            const hour = new Date().getHours();
            const mainTitle = document.getElementById('mainTitle');
            if (hour < 12) {
                mainTitle.textContent = 'Good morning';
            } else if (hour < 18) {
                mainTitle.textContent = 'Good afternoon';
            } else {
                mainTitle.textContent = 'Good evening';
            }
        }
        
        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            // Player Controls
            document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
            document.getElementById('nextBtn').addEventListener('click', nextTrack);
            document.getElementById('prevBtn').addEventListener('click', prevTrack);
            document.getElementById('shuffleBtn').addEventListener('click', toggleShuffle);
            document.getElementById('repeatBtn').addEventListener('click', toggleRepeat);
            document.getElementById('playerHeartBtn').addEventListener('click', toggleLike);
            
            // Navigation
            document.querySelectorAll('.nav-item[data-section]').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = item.dataset.section;
                    showSection(section);
                });
            });
            
            // Coffee mood playlists
            document.querySelectorAll('.playlist-nav').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const playlist = item.dataset.playlist;
                    showCoffeeMoodPlaylist(playlist);
                });
            });
            
            // Create playlist
            document.getElementById('createPlaylistBtn').addEventListener('click', (e) => {
                e.preventDefault();
                showCreatePlaylistModal();
            });
            
            // Video controls
            document.getElementById('prevVideoBtn').addEventListener('click', prevVideo);
            document.getElementById('nextVideoBtn').addEventListener('click', nextVideo);
            
            // Genre pills
            document.querySelectorAll('.genre-pill').forEach(pill => {
                pill.addEventListener('click', () => {
                    document.querySelectorAll('.genre-pill').forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');
                    filterByGenre(pill.dataset.genre);
                });
            });
            
            // Progress bar
            document.getElementById('progressBar').addEventListener('click', (e) => {
                const rect = e.currentTarget.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                const track = tracks[currentTrack.id];
                if (track) {
                    currentTrack.currentTime = Math.floor(percent * track.duration);
                    updatePlayerUI();
                }
            });
            
            // Volume slider
            document.getElementById('volumeSlider').addEventListener('click', (e) => {
                const rect = e.currentTarget.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                volume = Math.max(0, Math.min(1, percent));
                document.getElementById('volumeFill').style.width = `${volume * 100}%`;
            });
            
            // Mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            document.getElementById('overlay').addEventListener('click', closeMobileMenu);
            
            // Play all buttons
            document.getElementById('likedPlayAllBtn').addEventListener('click', () => {
                if (likedSongs.length > 0) {
                    currentPlaylist = 'liked';
                    playTrack(likedSongs[0]);
                    showNotification('Playing Liked Songs');
                }
            });
            
            // Close modals on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeCreatePlaylistModal();
                    closeAddToPlaylistModal();
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f15de32004e5e8',t:'MTc1Nzg2ODQ1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
